{% extends "blog/base_generic.html" %}

{% block content %}
<h1>{{ object.title }}</h1>

<p class="post-meta text-muted">
    By <a href="{{ post.author.get_absolute_url }}">{{ post.author.user.username }}</a> on {{ post.post_date }}
</p>

<div class="post-content">
    <p>{{ object.content }}</p>
</div>

<hr class="divider-orange">

<div class="comments-section">
    <h3>Comments</h3>

    {% if object.comments.all %}
    {% for comment in object.comments.all %}
    <div class="comment-card">
        <p><strong>{{ comment.user.username }}</strong> said:</p>
        <p class="comment-body">{{ comment.description }}</p>
        <span class="comment-meta">Posted: {{ comment.post_date|date:"F j, Y, g:i a" }}</span>
    </div>
    {% endfor %}
    {% else %}
    <p>No comments yet. Be the first to comment!</p>
    {% endif %}

    <div class="add-comment-section">
        {% if user.is_authenticated %}
        <a href="{% url 'comment-create' object.id %}" class="btn-add-comment">Add Comment</a>
        {% else %}
        <p><a href="{% url 'login' %}?next={{ request.path }}">Login</a> to add a comment.</p>
        {% endif %}
    </div>
</div>
{% endblock %}