{% extends "blog/base_generic.html" %}

{% block content %}
<div class="detail-container">

  <div class="card post-card">
    <h1 class="post-title">{{ blogpost.title }}</h1>
    <p class="post-meta">
      Posted by 
      <a href="{% url 'blogger-details' blogpost.author.pk %}">{{ blogpost.author }}</a> 
      on {{ blogpost.post_date }}
    </p>
    
    <div class="post-body">
      {{ blogpost.content }}
    </div>
  </div>

  <div class="card comments-card">
    <h3>Comments</h3>
    
    <div class="comments-list">
      {% for comment in blogpost.comments.all %}
        <div class="single-comment">
          <p class="comment-header">
            <strong>{{ comment.user.username }}</strong> 
            <span class="text-muted"> - {{ comment.post_date }}</span>
          </p>
          <p class="comment-body">{{ comment.description }}</p>
        </div>
      {% empty %}
        <p>No comments yet.</p>
      {% endfor %}
    </div>

    {% if user.is_authenticated %}
      <div class="add-comment-section">
        <a href="{% url 'comment-create' blogpost.pk %}" class="btn-primary">Add a Comment</a>
      </div>
    {% else %}
      <p><a href="{% url 'login' %}?next={{ request.path }}">Log in</a> to leave a comment.</p>
    {% endif %}
  </div>

</div>
{% endblock %}
